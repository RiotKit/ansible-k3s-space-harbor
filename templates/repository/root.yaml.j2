---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
    name: root
    namespace: {{ argocd_namespace }}
spec:
    project: default
    source:
        repoURL: '{{ cluster_git_repository.remote }}'
        path: definitions
        directory:
            recurse: true
            jsonnet: {}
    destination:
        server: 'https://kubernetes.default.svc'
        namespace: argocd
